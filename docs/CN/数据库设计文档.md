# 🚀Xcode Online Judge (XOJ) 数据库设计文档



- user

> 实体，用户信息

| 关键字     | 类型         | 说明                              |
| ---------- | ------------ | --------------------------------- |
| id         | INT          | 主键                              |
| username   | VARCHAR(16)  | 用户名                            |
| password   | VARCHAR(256) | 密码                              |
| nickname   | VARCHAR(30)  | 昵称                              |
| email      | VARCHAR(100) | 邮箱                              |
| student_id | VARCHAR(20)  | 学号                              |
| faculty    | INT          | 所属院系                          |
| class_name | INT          | 所属班级                          |
| gender     | INT          | 性别,0: 女生;1: 男生;2: 保密      |
| authority  | INT          | 权限                              |
| role       | INT          | 角色,0:管理员;1:学生;2教师;3:游客 |
| is_delete  | INT          | 0: 未删除，1: 已删除              |



- question

> 实体，问题

| 关键字       | 类型         | 说明                                    |
| ------------ | ------------ | --------------------------------------- |
| id           | INT          | 主键                                    |
| titile       | VARCHAR(200) | 题目                                    |
| description  | LONGTEXT     | 题目详细描述                            |
| level        | INT          | 题目难度等级，分1-10档，1最简单，10最难 |
| example      | TEXT         | 示例，采用JSON格式存储                  |
| tips         | TEXT         | 提示内容                                |
| advance      | TEXT         | 进阶内容                                |
| submit_count | INT          | 提交次数                                |
| pass_count   | INT          | 通过次数                                |
| case         | TEXT         | 测试用例，采用JSON格式存储              |
| template     | LONGTEXT     | 模板代码                                |
| time_limit   | FLOAT        | 时间限制，单位毫秒                      |
| mem_limit    | FLOAT        | 内存限制                                |
| is_delete    | INT          | 0: 未删除，1: 已删除                    |



- tag

> 实体，标签

| 关键字   | 类型        | 说明 |
| -------- | ----------- | ---- |
| id       | INT         | 主键 |
| tag_name | VARCHAR(20) | 标签 |



- tag_ques_relation

> 关系， tag与question的关系为多对多

| 关键字 | 类型 | 说明           |
| ------ | ---- | -------------- |
| id     | INT  | 主键           |
| qid    | INT  | question表的id |
| tid    | INT  | tag表的id      |



- submit

> 实体，提交记录表

| 关键字          | 类型     | 说明                                               |
| --------------- | -------- | -------------------------------------------------- |
| id              | INT      | 主键                                               |
| uid             | INT      | 提交用户的主键                                     |
| time_spend      | FLOAT    | 时间花费，单位毫秒                                 |
| mem_spend       | FLOAT    | 内存花费，单位KB                                   |
| code            | LONGTEXT | 用户所提交代码                                     |
| type            | INT      | 语言种类，0: C，1: C++，2: JAVA, 3: Python, 4: SQL |
| submission_time | DATE     | 提交时间                                           |
| is_delete       | INT      | 0: 未删除，1: 已删除                               |

